---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
---

<article class="wrap-break-word">
  <a href={`/blog/${post.slug}/`} class="block">
    <div class="aspect-video relative overflow-hidden rounded-md">
      {
        post.data.heroImage && (
          <Image
            src={post.data.heroImage}
            alt={post.data.title}
            width={720}
            height={405}
            class="object-cover w-full h-full absolute inset-0 hover:scale-105 transition-transform duration-300"
          />
        )
      }
    </div>
  </a>

  <div class="grid grid-cols-1 gap-3 mt-4">
    <h2
      class="font-sans font-semibold tracking-tighter text-primary text-2xl md:text-3xl"
    >
      <a
        href={`/blog/${post.slug}/`}
        class="hover:text-primary-hover transition-colors"
      >
        {post.data.title}
      </a>
    </h2>

    <div class="italic tracking-tighter text-muted-foreground text-sm">
      <time datetime={post.data.pubDate.toISOString()}>
        {
          post.data.pubDate.toLocaleDateString("en-us", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })
        }
      </time>
    </div>

    <div class="leading-relaxed md:text-lg line-clamp-4 text-muted-foreground">
      {post.data.description}
    </div>

    {
      post.data.tags && post.data.tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mt-2">
          {post.data.tags.map((tag) => (
            <span class="inline-block px-3 py-1 text-sm bg-accent text-accent-foreground rounded-full">
              {tag}
            </span>
          ))}
        </div>
      )
    }
  </div>
</article>
